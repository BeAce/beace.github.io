{"data":{"site":{"siteMetadata":{"title":"Beace Blog","author":"Beace Lee"}},"markdownRemark":{"id":"54b646da-3894-5d6f-82be-9a73bf180ed8","html":"<h2>背景</h2>\n<p>在阅读<a href=\"https://www.flexboxpatterns.com/card-group\">Flexbox Patterns</a>文章时，发现曾经解决过如下问题。在此作为记录。</p>\n<h2>需求描述</h2>\n<p>对于常见的列表或者卡片布局时，宽度往往统一，高度参差不齐。如果想要实现风格一致的卡片或者列表，如下图所示，当描述文字高度不一致时，最底的价格始终保持在最下面，每两个对齐。</p>\n<p><img src=\"https://images-manager.oss-cn-shanghai.aliyuncs.com/static/css/flex/flex-card-group.jpg\"></p>\n<!--more-->\n<h2>实现方式</h2>\n<h3>DOM结构</h3>\n<p>对于手机端而言，没有太多的 浏览器兼容性问题。整个布局比较简单，<code class=\"language-text\">DOM</code>结构代码如下所示。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card-container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card card--flexdWidth<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card__description<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>icon fa fa-flask card__descriptionIcon<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card_descriptionText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                    Science potion Science potion Science potion\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card__price<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Cost $5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card card--flexdWidth<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card__description<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>icon fa fa-flask card__descriptionIcon<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card_descriptionText<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Science potion<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>card__price<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Cost $5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>*4\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<p>这里，我添加了许多5个结构相同的<code class=\"language-text\">card</code>组件,唯一有点区别的是第一个<code class=\"language-text\">card</code>组件的文字内容稍微多些。为了测试我的最终效果。</p>\n<h3>STYLE</h3>\n<p>大体的样式比较简单</p>\n<ul>\n<li>最外层盒子<code class=\"language-text\">display</code>属性为<code class=\"language-text\">flex</code>，并且<code class=\"language-text\">flex-wrap</code>为<code class=\"language-text\">wrap</code>允许换行，宽度为<code class=\"language-text\">100%</code></li>\n<li>每一个card组件宽度为<code class=\"language-text\">50%</code>，基数时盒子右边添加一个边框，这时会将第二个card挤下去，因此为改盒子添加了<code class=\"language-text\">box-sizing:border-box</code>属性。</li>\n<li>其中每一个card内部，<code class=\"language-text\">display</code>也为<code class=\"language-text\">flex</code>，<code class=\"language-text\">flex-direction</code>为垂直方向。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">*</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 0\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">html,\n    body</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">.card-container</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">flex-wrap</span><span class=\"token punctuation\">:</span> wrap<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">.card</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">flex-direction</span><span class=\"token punctuation\">:</span>  column<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">border-bottom</span><span class=\"token punctuation\">:</span> 1px solid #cad0d2<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">.card:nth-child(odd)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">border-right</span><span class=\"token punctuation\">:</span> 1px solid #cad0d2<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">.card__description</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">flex-direction</span><span class=\"token punctuation\">:</span> column<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">align-items</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 15px 0<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 2em<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">.card_descriptionText</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #57727c<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 1em<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span>100% - 30px<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">.card__price</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #57727c<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 1em<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> 700<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 5px 15px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token selector\">.card--flexdWidth</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>到这里，样子大概是这样。</p>\n<p><img src=\"https://images-manager.oss-cn-shanghai.aliyuncs.com/static/css/flex/flex-card-group2.jpg\"></p>\n<blockquote>\n<p>这时候就可以发现问题出现了，当描述内容的字相差不太多时，还可以看到展现方式比较一致，当字数相差许多，盒子被不断撑开时，价格的位置就显得不太一致。</p>\n</blockquote>\n<h3>解决思路</h3>\n<p>可以想到，flex布局中，控制子元素属性——<code class=\"language-text\">align-self</code>，如果flex布局中方向为垂直，则其根据父元素自动计算垂直有关属性；同样，如果为水平，根据父元素计算水平有关属性。flex中，有如下常用属性。</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>center</td>\n<td>垂直/水平居中</td>\n</tr>\n<tr>\n<td>flex-start</td>\n<td>始终在flex的开始</td>\n</tr>\n<tr>\n<td>flex-end</td>\n<td>始终在flex盒子的底部</td>\n</tr>\n</tbody>\n</table>\n<p>了解到这里，可以通过设置每一个<code class=\"language-text\">card</code>的中的布局跟最外层<code class=\"language-text\">card-container</code>一致，如下。</p>\n<div class=\"gatsby-highlight\" data-language=\"css\">\n      <pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.card</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">flex-direction</span><span class=\"token punctuation\">:</span> row<span class=\"token punctuation\">;</span> //由垂直改为水平\n    <span class=\"token property\">flex-wrap</span><span class=\"token punctuation\">:</span> wrap<span class=\"token punctuation\">;</span> //flex 元素 被打断到多个行中\n    <span class=\"token property\">justify-content</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span> //内容水平居中\n    <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-bottom</span><span class=\"token punctuation\">:</span> 1px solid #cad0d2<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">box-sizing</span><span class=\"token punctuation\">:</span> border-box<span class=\"token punctuation\">;</span> //忽略border\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.card__price</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token property\">align-self</span><span class=\"token punctuation\">:</span> flex-end<span class=\"token punctuation\">;</span> //一直保持在flex box的底部\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<h3>总结</h3>\n<p>需要注意的是，其父元素的<code class=\"language-text\">flex</code>属性必须为<code class=\"language-text\">row</code>,且<code class=\"language-text\">flex-wrap</code>属性必须为<code class=\"language-text\">wrap</code>，这样card组件中的价格才能保持在flex盒子中的底部位置。</p>","frontmatter":{"title":"div始终位于底部的问题","date":"Invalid date"}}},"pageContext":{"slug":"/div-position-always-bottom/","previous":{"fields":{"slug":"/github-passport/"},"frontmatter":{"title":""}},"next":{"fields":{"slug":"/React-IndexRoute always-active/"},"frontmatter":{"title":""}}}}