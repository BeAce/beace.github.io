{"data":{"site":{"siteMetadata":{"title":"Beace Blog","author":"Kyle Mathews"}},"markdownRemark":{"id":"719a94c8-31cf-5c9e-9295-586e7fad4a2c","html":"<hr>\n<p>title: React 动态添加一行数据（包括一行表格或者非表格）\ndate: Mon Sep 12 2016 16:39:36 GMT+0800 (CST)\nupdated: Tue Sep 20 2016 08:03:08 GMT+0800 (CST)\ncomments: 1\ncategories:\ntags: [[object Object],[object Object]]\npermalink: react-dynamic-add-rows</p>\n<hr>\n<h4>React 在<code class=\"language-text\">return</code>中添加<code class=\"language-text\">table</code>不可以直接嵌套多个<code class=\"language-text\">tr</code></h4>\n<p>在<code class=\"language-text\">react</code>中的<code class=\"language-text\">return</code>函数添加表格，代码如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>table</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>table table-striped table-hover table-bordered<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>th</span><span class=\"token punctuation\">></span></span>姓名<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>th</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>th</span><span class=\"token punctuation\">></span></span>手机号<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>th</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>item1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span>item2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>table</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n<!--more-->\n<p>浏览器会报这样的错误；\n<img src=\"/static/upload/201609/GAsDi4y2t25z0AzoWjiigpn9.png\" alt=\"alt\"></p>\n<blockquote>\n<p>react不会把DOM解析成thead和tbody这样的方式,</p>\n</blockquote>\n<h4>解决方式为手动添加，完整代码为：</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    render<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>table className<span class=\"token operator\">=</span><span class=\"token string\">\"table table-striped table-hover table-bordered\"</span><span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>thead<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>姓名<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>手机号<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>部门<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>角色<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>状态<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>证件类型<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>证件号<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">></span>操作<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>thead<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>tbody<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>item1<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>item2<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>item3<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>item4<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>item5<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>item6<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span>item7<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"javascript:;\"</span><span class=\"token operator\">></span>修改<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"javascript:;\"</span><span class=\"token operator\">></span>删除<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tbody<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<h3>但是遇到必须要添加一行的时候如何是好,或者更加奇怪但是很常见到的例子：</h3>\n<p><img src=\"/static/upload/201609/jyJCyGqL7_L0msH0bqpQaCPt.png\" alt=\"alt\"></p>\n<p>这样问题不是经常见到，会看到它共同点很多，都是添加一行数据，但是保持在表格的结构里，却有一个非共同点，第一列的数据不发生改变，并且随着一行表格的增多，一直保持垂直居中。</p>\n<h4>解决方法</h4>\n<p><code class=\"language-text\">table</code>中垂直方向合并单元格，除此单元格外，动态添加删除行\n做法如下：</p>\n<ul>\n<li>\n<p>合并第一个单元格，垂直方向；</p>\n</li>\n<li>\n<p>将其后的单元格全部合并，图片中合并了三个，水平方向</p>\n</li>\n<li>\n<p>根据bootstrap的栅格系统，可以讲其分为三组\n代码如下，表示其中一行，放在一个<code class=\"language-text\">td</code>里面，这样<code class=\"language-text\">react</code>就不会报语法错误了：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>row row-padding<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>col-xs-7 row-height<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>col-xs-3 no-padding<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        &lt;FormField.Number className=\"form-control\"\n                          decimalDigits={2}\n                          value={model.start}\n                          onChange={this.props.onChangeField(\"start\",viewId).bind(this)}\n                          disabled\n        />\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    {\n        models.indexOf(model) == 0 ?\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>col-xs-3 no-padding<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>元(包含)到<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> :\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>col-xs-3 no-padding<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>元(不包含)到<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    }\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>col-xs-3 no-padding<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        &lt;FormField.Number className=\"form-control\"\n                          decimalDigits={2}\n                          value={model.end}\n                          onChange={this.props.onChangeField(\"end\",viewId).bind(this)}\n        />\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>col-xs-3 no-padding<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>元(包含)<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>col-xs-2 no-padding<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    &lt;FormField.Number className=\"form-control\"\n                      decimalDigits={2}\n                      value={model.addition}\n                      onChange={this.props.onChangeField(\"addition\",viewId).bind(this)}\n    />\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>col-xs-3 row-height<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    {\n        models.indexOf(model) == 0 ?\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>javascript:;<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>{this.addRow.bind(this,</span> <span class=\"token attr-name\">model)}</span><span class=\"token punctuation\">></span></span>增加分级<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span> :\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>javascript:;<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>{this.removeThis.bind(this,</span> <span class=\"token attr-name\">model)}</span><span class=\"token punctuation\">></span></span>删除分级<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    }\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n      </div>\n</li>\n</ul>","frontmatter":{"title":"","date":null}}},"pageContext":{"slug":"/2016-09-12-React 动态添加一行数据（包括一行表格或者非表格）/","previous":{"fields":{"slug":"/2016-09-12-react的缺点（一）：react中多个component的问题记录/"},"frontmatter":{"title":""}},"next":{"fields":{"slug":"/2016-09-12-Github中passport的应用（github登录接口）/"},"frontmatter":{"title":""}}}}